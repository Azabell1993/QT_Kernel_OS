\doxysection{kernel\+\_\+uniqueptr.\+h}
\hypertarget{kernel__uniqueptr_8h_source}{}\label{kernel__uniqueptr_8h_source}\index{C\_lib/include/kernel\_uniqueptr.h@{C\_lib/include/kernel\_uniqueptr.h}}
\mbox{\hyperlink{kernel__uniqueptr_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00001}00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00002}00002\ \textcolor{preprocessor}{\#ifndef\ KERNEL\_UNIQUEPTR\_H}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00003}\mbox{\hyperlink{kernel__uniqueptr_8h_af8ae8164b7cc517281f99e9b2335cf3c}{00003}}\ \textcolor{preprocessor}{\#define\ KERNEL\_UNIQUEPTR\_H}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <dlfcn.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <pthread.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00009}00009\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <stdarg.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00011}00011\ \textcolor{preprocessor}{\#include\ <errno.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00012}00012\ \textcolor{preprocessor}{\#include\ <sys/types.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00013}00013\ \textcolor{preprocessor}{\#include\ <sys/socket.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00014}00014\ \textcolor{preprocessor}{\#include\ <fcntl.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00015}00015\ \textcolor{preprocessor}{\#include\ <unistd.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00016}00016\ \textcolor{preprocessor}{\#include\ <sys/wait.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00017}00017\ \textcolor{preprocessor}{\#include\ <semaphore.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00018}00018\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00019}00019\ \textcolor{preprocessor}{\#include\ <netdb.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00020}00020\ \textcolor{preprocessor}{\#include\ <arpa/inet.h>}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00021}00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{kernel__print_8h}{kernel\_print.h}}"{}}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00022}00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{kernel__engine_8h}{kernel\_engine.h}}"{}}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00024}00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ename_8c_8inc}{../src/ename.c.inc}}"{}}\ \ \textcolor{comment}{//\ 파일의\ 상대\ 경로로\ 수정}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00027}\mbox{\hyperlink{kernel__uniqueptr_8h_a6821bafc3c88dfb2e433a095df9940c6}{00027}}\ \textcolor{preprocessor}{\#define\ BUF\_SIZE\ 100}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00028}\mbox{\hyperlink{kernel__uniqueptr_8h_a7735206bdfad487588bba2126b806ab7}{00028}}\ \textcolor{preprocessor}{\#define\ NUM\_THREADS\ 3}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00029}\mbox{\hyperlink{kernel__uniqueptr_8h_a220f38b26fa99d4d91b574f42d991516}{00029}}\ \textcolor{preprocessor}{\#define\ MAX\_STRING\_SIZE\ 100}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00031}\mbox{\hyperlink{kernel__uniqueptr_8h_afb3e2c8f77b996229ee801821237e411}{00031}}\ \textcolor{preprocessor}{\#define\ RETAIN\_SHARED\_PTR(ptr)\ retain\_shared\_ptr(ptr);}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00032}\mbox{\hyperlink{kernel__uniqueptr_8h_a8ab64fdb1355aac975e77ae309fba0b4}{00032}}\ \textcolor{preprocessor}{\#define\ RELEASE\_SHARED\_PTR(ptr)\ release\_shared\_ptr(ptr);}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00039}\mbox{\hyperlink{kernel__uniqueptr_8h_a70da70f3c50d15d43b532fef795bd814}{00039}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{kernel__uniqueptr_8h_a70da70f3c50d15d43b532fef795bd814}{default\_deleter}}(\textcolor{keywordtype}{void}\ *ptr)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00040}00040\ \ \ \ \ free(ptr);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00041}00041\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00047}\mbox{\hyperlink{struct_shared_ptr}{00047}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00048}\mbox{\hyperlink{struct_shared_ptr_a7dea034bb0b5914ef78b5ef2782605f0}{00048}}\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{struct_shared_ptr_a7dea034bb0b5914ef78b5ef2782605f0}{ptr}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00049}\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{00049}}\ \ \ \ \ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}};\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00050}\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{00050}}\ \ \ \ \ pthread\_mutex\_t\ *\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}};\ \ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00051}\mbox{\hyperlink{struct_shared_ptr_a19abfa597008acf4dfd3a97ce8219791}{00051}}\ \ \ \ \ void\ (*deleter)(\textcolor{keywordtype}{void}*);\ \ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00052}00052\ \}\ \mbox{\hyperlink{struct_shared_ptr}{SharedPtr}};}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00058}\mbox{\hyperlink{struct_unique_ptr}{00058}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00059}\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{00059}}\ \ \ \ \ \textcolor{keywordtype}{void}\ *\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{ptr}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00060}\mbox{\hyperlink{struct_unique_ptr_a4bfcc1eebb0c175780c2d8fed93b0046}{00060}}\ \ \ \ \ void\ (*deleter)(\textcolor{keywordtype}{void}*);\ \ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00061}00061\ \}\ \mbox{\hyperlink{struct_unique_ptr}{UniquePtr}};}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00070}\mbox{\hyperlink{kernel__uniqueptr_8h_a5e4b1c5f2f99dd40f4f957a0bc783cfd}{00070}}\ \mbox{\hyperlink{struct_shared_ptr}{SharedPtr}}\ \mbox{\hyperlink{kernel__uniqueptr_8h_a5e4b1c5f2f99dd40f4f957a0bc783cfd}{create\_shared\_ptr}}(\textcolor{keywordtype}{size\_t}\ size,\ \textcolor{keywordtype}{void}\ (*deleter)(\textcolor{keywordtype}{void}*))\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00071}00071\ \ \ \ \ \mbox{\hyperlink{struct_shared_ptr}{SharedPtr}}\ sp;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00072}00072\ \ \ \ \ sp.\mbox{\hyperlink{struct_shared_ptr_a7dea034bb0b5914ef78b5ef2782605f0}{ptr}}\ =\ malloc(size);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00073}00073\ \ \ \ \ sp.\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}}\ =\ (\textcolor{keywordtype}{int}*)malloc(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00074}00074\ \ \ \ \ *(sp.\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}})\ =\ 1;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00075}00075\ \ \ \ \ sp.\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}}\ =\ (pthread\_mutex\_t*)malloc(\textcolor{keyword}{sizeof}(pthread\_mutex\_t));}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00076}00076\ \ \ \ \ sp.\mbox{\hyperlink{struct_shared_ptr_a19abfa597008acf4dfd3a97ce8219791}{deleter}}\ =\ deleter\ ?\ deleter\ :\ \mbox{\hyperlink{kernel__uniqueptr_8h_a70da70f3c50d15d43b532fef795bd814}{default\_deleter}};}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00077}00077\ \ \ \ \ pthread\_mutex\_init(sp.\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}},\ NULL);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00078}00078\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00079}00079\ \ \ \ \ \textcolor{keywordflow}{return}\ sp;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00080}00080\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00089}\mbox{\hyperlink{kernel__chat_8h_ac61360dbe29daa4ef0965e19f858bbd6}{00089}}\ \mbox{\hyperlink{struct_unique_ptr}{UniquePtr}}\ \mbox{\hyperlink{kernel__uniqueptr_8h_ac61360dbe29daa4ef0965e19f858bbd6}{create\_unique\_ptr}}(\textcolor{keywordtype}{size\_t}\ size,\ \textcolor{keywordtype}{void}\ (*deleter)(\textcolor{keywordtype}{void}*))\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00090}00090\ \ \ \ \ \mbox{\hyperlink{struct_unique_ptr}{UniquePtr}}\ up;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00091}00091\ \ \ \ \ up.\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{ptr}}\ =\ malloc(size);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00092}00092\ \ \ \ \ up.\mbox{\hyperlink{struct_unique_ptr_a4bfcc1eebb0c175780c2d8fed93b0046}{deleter}}\ =\ deleter\ ?\ deleter\ :\ \mbox{\hyperlink{kernel__uniqueptr_8h_a70da70f3c50d15d43b532fef795bd814}{default\_deleter}};}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00093}00093\ \ \ \ \ \textcolor{keywordflow}{return}\ up;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00094}00094\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00101}\mbox{\hyperlink{kernel__uniqueptr_8h_af3220cea62be4539d7dd7be986282f52}{00101}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{kernel__uniqueptr_8h_af3220cea62be4539d7dd7be986282f52}{retain\_shared\_ptr}}(\mbox{\hyperlink{struct_shared_ptr}{SharedPtr}}\ *sp)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00102}00102\ \ \ \ \ pthread\_mutex\_lock(sp-\/>\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00103}00103\ \ \ \ \ (*(sp-\/>\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}}))++;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00104}00104\ \ \ \ \ pthread\_mutex\_unlock(sp-\/>\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00105}00105\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00106}00106\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00112}\mbox{\hyperlink{kernel__uniqueptr_8h_a9f9f63294c5718add8a0f6dac5b5697d}{00112}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{kernel__uniqueptr_8h_a9f9f63294c5718add8a0f6dac5b5697d}{release\_shared\_ptr}}(\mbox{\hyperlink{struct_shared_ptr}{SharedPtr}}\ *sp)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{if}\ (sp-\/>\mbox{\hyperlink{struct_shared_ptr_a7dea034bb0b5914ef78b5ef2782605f0}{ptr}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00114}00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{kernel__engine_8h_a7c8ee439ee4e61c628d5343ab34d91da}{safe\_kernel\_printf}}(\textcolor{stringliteral}{"{}SharedPtr\ is\ already\ released\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00116}00116\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00118}00118\ \ \ \ \ sp-\/>\mbox{\hyperlink{struct_shared_ptr_a19abfa597008acf4dfd3a97ce8219791}{deleter}}(sp-\/>\mbox{\hyperlink{struct_shared_ptr_a7dea034bb0b5914ef78b5ef2782605f0}{ptr}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00119}00119\ \ \ \ \ sp-\/>\mbox{\hyperlink{struct_shared_ptr_a7dea034bb0b5914ef78b5ef2782605f0}{ptr}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00121}00121\ \ \ \ \ free(sp-\/>\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00122}00122\ \ \ \ \ sp-\/>\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00123}00123\ \ \ \ \ pthread\_mutex\_destroy(sp-\/>\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00124}00124\ \ \ \ \ free(sp-\/>\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00125}00125\ \ \ \ \ sp-\/>\mbox{\hyperlink{struct_shared_ptr_a24e8caad32c002f3651fa890a48e545d}{mutex}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00126}00126\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00133}\mbox{\hyperlink{kernel__uniqueptr_8h_a8bdb65a24223d991df006ebb04a4715c}{00133}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{kernel__uniqueptr_8h_a8bdb65a24223d991df006ebb04a4715c}{release\_unique\_ptr}}(\mbox{\hyperlink{struct_unique_ptr}{UniquePtr}}\ *up)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00134}00134\ \ \ \ \ \textcolor{keywordflow}{if}\ (up-\/>\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{ptr}})\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00135}00135\ \ \ \ \ \ \ \ \ up-\/>\mbox{\hyperlink{struct_unique_ptr_a4bfcc1eebb0c175780c2d8fed93b0046}{deleter}}(up-\/>\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{ptr}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00136}00136\ \ \ \ \ \ \ \ \ up-\/>\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{ptr}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00137}00137\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00138}00138\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00146}\mbox{\hyperlink{kernel__uniqueptr_8h_af16a4521096d757aac655c0589dff53f}{00146}}\ \mbox{\hyperlink{struct_unique_ptr}{UniquePtr}}\ \mbox{\hyperlink{kernel__uniqueptr_8h_af16a4521096d757aac655c0589dff53f}{transfer\_unique\_ptr}}(\mbox{\hyperlink{struct_unique_ptr}{UniquePtr}}\ *up)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00147}00147\ \ \ \ \ \mbox{\hyperlink{struct_unique_ptr}{UniquePtr}}\ new\_up\ =\ *up;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00148}00148\ \ \ \ \ up-\/>\mbox{\hyperlink{struct_unique_ptr_aba532f41d51379258b868406ba8c30c8}{ptr}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00149}00149\ \ \ \ \ \textcolor{keywordflow}{return}\ new\_up;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00150}00150\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00158}\mbox{\hyperlink{kernel__uniqueptr_8h_afdcd3c4530e88a357c01bd1fe47f4d26}{00158}}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{kernel__uniqueptr_8h_afdcd3c4530e88a357c01bd1fe47f4d26}{thread\_function\_shared}}(\textcolor{keywordtype}{void}*\ arg)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00159}00159\ \ \ \ \ \mbox{\hyperlink{struct_shared_ptr}{SharedPtr}}\ *sp\ =\ (\mbox{\hyperlink{struct_shared_ptr}{SharedPtr}}*)arg;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00160}00160\ \ \ \ \ \mbox{\hyperlink{kernel__uniqueptr_8h_af3220cea62be4539d7dd7be986282f52}{retain\_shared\_ptr}}(sp);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00161}00161\ \ \ \ \ printf(\textcolor{stringliteral}{"{}스레드에서\ shared\_ptr\ 사용\ 중\ -\/\ ref\_count:\ \%d\(\backslash\)n"{}},\ *(sp-\/>\mbox{\hyperlink{struct_shared_ptr_aa75bfd49e2bbe2ef46626ec04e199bf0}{ref\_count}}));}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00163}00163\ \ \ \ \ sleep(1);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00164}00164\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00165}00165\ \ \ \ \ \mbox{\hyperlink{kernel__uniqueptr_8h_a9f9f63294c5718add8a0f6dac5b5697d}{release\_shared\_ptr}}(sp);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00166}00166\ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00167}00167\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00175}\mbox{\hyperlink{kernel__uniqueptr_8h_a90c7035b12e90d2407263f548a2095ca}{00175}}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{kernel__uniqueptr_8h_a90c7035b12e90d2407263f548a2095ca}{thread\_function\_unique}}(\textcolor{keywordtype}{void}*\ arg)\ \{}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00176}00176\ \ \ \ \ (void)arg;\ \textcolor{comment}{//\ Ignore\ the\ unused\ variable}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00177}00177\ \ \ \ \ printf(\textcolor{stringliteral}{"{}스레드에서\ unique\_ptr\ 사용\ 중\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00178}00178\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00179}00179\ \ \ \ \ sleep(1);}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00180}00180\ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00181}00181\ \}}
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00182}00182\ }
\DoxyCodeLine{\Hypertarget{kernel__uniqueptr_8h_source_l00183}00183\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ KERNEL\_UNIQUEPTR\_H}}

\end{DoxyCode}
